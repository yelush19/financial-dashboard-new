# ðŸ“Š ×ª×•×›× ×™×ª ×©×™×¤×•×¨ ×ž×¢×¨×›×ª Drill-Down
**×¤×¨×•×™×§×˜:** Financial Dashboard  
**×ª××¨×™×š:** 21 ××•×§×˜×•×‘×¨ 2025  
**Session:** 14  
**×¡×˜×˜×•×¡:** ðŸŸ¡ ×‘×ª×›× ×•×Ÿ

---

## ðŸŽ¯ ×ž×˜×¨×”
×”×ž×¨×ª ×ž×¢×¨×›×ª drill-down ×ž-popup ×œ×’×œ×™×œ×” ×¢× 4 ×¨×ž×•×ª × ×™×•×•×˜:
- **×¨×ž×•×ª 1-3:** ×’×œ×™×œ×” ×œ×ž×˜×” (scroll) ×‘××–×•×¨ ×ž×ª×—×ª ×œ×˜×‘×œ×” ×”×¨××©×™×ª
- **×¨×ž×” 4:** BiurModal (popup ×§×™×™×) ×œ×¤×™×¨×•×˜ ×ª× ×•×¢×•×ª

---

## ðŸ“‹ ×ž×‘× ×” 4 ×”×¨×ž×•×ª

### ×¨×ž×” 1ï¸âƒ£ - ×§×•×“ ×ž×™×•×Ÿ (×˜×‘×œ×” ×¨××©×™×ª) âœ…
**×ž×§×•×¨ × ×ª×•× ×™×:** ×˜×‘×œ×” ×¨××©×™×ª ×§×™×™×ž×ª  
**×“×•×’×ž×”:**
```
801 - ×”×•×¦××•×ª ×©×™×•×•×§ | ×™× ×•××¨: 50,000 â‚ª
```
**××™× ×˜×¨××§×¦×™×”:** ×œ×—×™×¦×” ×¢×œ ×¡×›×•× â†’ ×¤×•×ª×— ×¨×ž×” 2

---

### ×¨×ž×” 2ï¸âƒ£ - ×›×¨×˜×™×¡×™ ×”×•×¦××•×ª (×’×œ×™×œ×”) ðŸ†•
**×ž×§×•×¨ × ×ª×•× ×™×:** `TransactionMonthlyModi.csv`  
**×¢×ž×•×“×•×ª:** `×ž×¤×ª×— ×—×©×‘×•×Ÿ` + `×©× ×—×©×‘×•×Ÿ`

**×“×•×’×ž×”:**
```
ðŸ“Š 50004 - ×”×•×¦××•×ª × ×¡×™×¢×•×ª ×ž×—×œ×§×ª ×¡×™×˜×•× ××•×ª: 30,000 â‚ª
ðŸ“Š 50010 - ×”×•×¦××•×ª ×¤×¨×¡×•×: 20,000 â‚ª
```

**×ª×¦×•×’×”:**
- ×¤×× ×œ ×ž×ª×—×ª ×œ×˜×‘×œ×” ×”×¨××©×™×ª
- ×›×•×ª×¨×ª: "×¨×ž×” 2: ×›×¨×˜×™×¡×™ ×”×•×¦××•×ª - ×§×•×“ 801 - ×™× ×•××¨"
- ×›×¤×ª×•×¨ [X] ×œ×¡×’×™×¨×”
- ×˜×‘×œ×”: ×ž×¤×ª×— ×—×©×‘×•×Ÿ | ×©× ×—×©×‘×•×Ÿ | ×¡×›×•×

**××™× ×˜×¨××§×¦×™×”:** ×œ×—×™×¦×” ×¢×œ ×©×•×¨×” â†’ ×¤×•×ª×— ×¨×ž×” 3

---

### ×¨×ž×” 3ï¸âƒ£ - ×¡×¤×§×™×/×—×©×‘×•× ×•×ª × ×’×“×™×™× (×’×œ×™×œ×”) ðŸ†•
**×ž×§×•×¨ × ×ª×•× ×™×:** `TransactionMonthlyModi.csv`  
**×¢×ž×•×“×•×ª:** `×—-×Ÿ × ×’×“×™` + `×©× ×—×©×‘×•×Ÿ × ×’×“×™`

**×“×•×’×ž×”:**
```
ðŸ‘¤ 20035 - ×—×‘×¨×ª ×”×¡×¢×•×ª: 18,000 â‚ª
ðŸ‘¤ 30000 - ×ª×—× ×ª ×“×œ×§: 12,000 â‚ª
```

**×ª×¦×•×’×”:**
- ×¤×× ×œ ×ž×ª×—×ª ×œ×¨×ž×” 2
- ×›×•×ª×¨×ª: "×¨×ž×” 3: ×¡×¤×§×™× - ×—×©×‘×•×Ÿ 50004 - ×”×•×¦××•×ª × ×¡×™×¢×•×ª"
- ×›×¤×ª×•×¨ [X] ×œ×¡×’×™×¨×”
- ×˜×‘×œ×”: ×—-×Ÿ × ×’×“×™ | ×©× ×¡×¤×§ | ×¡×›×•×

**××™× ×˜×¨××§×¦×™×”:** ×œ×—×™×¦×” ×¢×œ ×¡×›×•× â†’ ×¤×•×ª×— ×¨×ž×” 4 (BiurModal)

---

### ×¨×ž×” 4ï¸âƒ£ - ×¤×™×¨×•×˜ ×ª× ×•×¢×•×ª (BiurModal - popup) âœ…
**×ž×§×•×¨ × ×ª×•× ×™×:** `TransactionMonthlyModi.csv`  
**×ª×¦×•×’×”:** ×ž×•×“×œ ×¦×£ ×§×™×™× (BiurModal.tsx)

**×“×•×’×ž×”:**
```
ðŸ“ 01/01/2025 | 500 â‚ª | × ×¡×™×¢×” ×œ××™×œ×ª
ðŸ“ 15/01/2025 | 300 â‚ª | × ×¡×™×¢×” ×œ×—×™×¤×”
```

**××™× ×˜×¨××§×¦×™×”:** ×›×¤×ª×•×¨ [X] ×œ×¡×’×™×¨×”

---

## ðŸ—ï¸ ×ž×‘× ×” ×˜×›× ×™

### ×§×‘×¦×™× ×—×“×©×™× ×©×™×•×•×¦×¨×•:
1. **`ScrollableDrillDown.tsx`** ðŸ†•
   - ×¨×›×™×‘ ×¨××©×™ ×œ×¨×ž×•×ª 2+3
   - ×ž× ×”×œ state ×©×œ ×¨×ž×•×ª
   - ×ž×¦×™×’ ×˜×‘×œ××•×ª ×‘×’×œ×™×œ×”

### ×§×‘×¦×™× ×§×™×™×ž×™× ×œ×¢×“×›×•×Ÿ:
1. **`index.tsx`**
   - ×”×•×¡×¤×ª state ×œ× ×™×”×•×œ ×¨×ž×•×ª
   - ×—×™×‘×•×¨ ScrollableDrillDown
   
2. **`CategoryRow.tsx`**
   - ×©×™× ×•×™ onClick â†’ ×¤×ª×™×—×ª ScrollableDrillDown
   
3. **`BiurModal.tsx`**
   - × ×©××¨ ×œ×œ× ×©×™× ×•×™ (×¨×ž×” 4 ×‘×œ×‘×“)

### ×§×‘×¦×™× ×œ××¨×›×™×•×Ÿ:
1. **`DrillDownModal.tsx`** â†’ `DrillDownModal.tsx.backup`
   - ×”×ž×•×“×œ ×”×™×©×Ÿ ×œ× ×™×©×ž×© ×™×•×ª×¨

---

## ðŸ“ ×ž×‘× ×” ScrollableDrillDown Component

### Props Interface:
```typescript
interface ScrollableDrillDownProps {
  isOpen: boolean;
  onClose: () => void;
  categoryCode: number | string;
  categoryName: string;
  month: number;
  monthName: string;
  transactions: Transaction[];
  formatCurrency: (amount: number) => string;
  onShowBiur: (transactions: Transaction[], title: string) => void;
}
```

### State ×¤× ×™×ž×™:
```typescript
const [currentLevel, setCurrentLevel] = useState<2 | 3>(2);
const [selectedAccount, setSelectedAccount] = useState<{
  code: number;
  name: string;
} | null>(null);
```

### ×œ×•×’×™×§×”:
1. **×¤×ª×™×—×”:** ×ž×¦×™×’ ×¨×ž×” 2 (×›×¨×˜×™×¡×™ ×”×•×¦××•×ª)
2. **×œ×—×™×¦×” ×¢×œ ×—×©×‘×•×Ÿ:** ×¢×•×‘×¨ ×œ×¨×ž×” 3 + ×©×•×ž×¨ ××ª ×”×—×©×‘×•×Ÿ ×”× ×‘×—×¨
3. **×œ×—×™×¦×” ×¢×œ ×¡×¤×§:** ×§×•×¨× ×œ-`onShowBiur` (×¤×•×ª×— BiurModal)
4. **×¡×’×™×¨×”:** ×ž××¤×¡ state ×•×—×•×–×¨ ×œ×¨×ž×” 2

---

## ðŸŽ¨ ×¢×™×¦×•×‘ ×•×™×–×•××œ×™

### ××–×•×¨ ×’×œ×™×œ×”:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ×˜×‘×œ×” ×¨××©×™×ª (×¨×ž×” 1)                            â”‚
â”‚ 801 | ×”×•×¦××•×ª ×©×™×•×•×§ | ×™× ×•××¨ | 50,000 â‚ª ðŸ‘†     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“ ×œ×—×™×¦×” â†’ scroll ×œ×ž×˜×”
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [X] ðŸ”½ ×¨×ž×” 2: ×›×¨×˜×™×¡×™ ×”×•×¦××•×ª - 801 - ×™× ×•××¨   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ×ž×¤×ª×— | ×©× ×—×©×‘×•×Ÿ            | ×¡×›×•×         â”‚ â”‚
â”‚ â”‚ 50004 | ×”×•×¦××•×ª × ×¡×™×¢×•×ª      | 30,000 â‚ª ðŸ‘† â”‚ â”‚
â”‚ â”‚ 50010 | ×”×•×¦××•×ª ×¤×¨×¡×•×       | 20,000 â‚ª     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“ ×œ×—×™×¦×” â†’ scroll ×¢×•×“ ×œ×ž×˜×”
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [X] ðŸ”½ ×¨×ž×” 3: ×¡×¤×§×™× - 50004                   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ×—-×Ÿ × ×’×“×™ | ×©× ×¡×¤×§         | ×¡×›×•×         â”‚ â”‚
â”‚ â”‚ 20035    | ×—×‘×¨×ª ×”×¡×¢×•×ª      | 18,000 â‚ª ðŸ‘† â”‚ â”‚
â”‚ â”‚ 30000    | ×ª×—× ×ª ×“×œ×§        | 12,000 â‚ª     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“ ×œ×—×™×¦×” ×¢×œ ×¡×›×•×
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [X] ðŸ“ ×¨×ž×” 4: ×¤×™×¨×•×˜ ×ª× ×•×¢×•×ª (BiurModal)       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ×ª××¨×™×š     | ×¡×›×•×  | ×¤×¨×˜×™×                â”‚ â”‚
â”‚ â”‚ 01/01/2025| 500 â‚ª | × ×¡×™×¢×” ×œ××™×œ×ª          â”‚ â”‚
â”‚ â”‚ 15/01/2025| 300 â‚ª | × ×¡×™×¢×” ×œ×—×™×¤×”         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ×¦×‘×¢×™× (×œ×¤×™ ×›×œ×œ×™ ×”×¤×¨×•×™×§×˜):
- **×¨×§×¢ ×¨×ž×” 2/3:** `#f9fafb` (××¤×•×¨ ×‘×”×™×¨)
- **×ž×¡×’×¨×ª:** `#e5e7eb` (××¤×•×¨ ×‘×™× ×•× ×™)
- **×›×•×ª×¨×•×ª:** `#166534` (×™×¨×•×§)
- **×˜×§×¡×˜:** `#000000` (×©×—×•×¨)
- **×”×•×‘×¨:** `#f3f4f6` (××¤×•×¨)
- **×¡×›×•×ž×™×:** ×©×—×•×¨ ×ª×ž×™×“ (×’× ×©×œ×™×œ×™×™× ×‘×¡×•×’×¨×™×™×)

---

## ðŸ”„ ×ª×”×œ×™×š ×¤×™×ª×•×— ×¦×¢×“-×¦×¢×“

### ×©×œ×‘ 1: ×”×›× ×”
- [x] âœ… Git commit + push (×”×•×©×œ×)
- [ ] ×™×¦×™×¨×ª `ScrollableDrillDown.tsx`
- [ ] ×’×™×‘×•×™ `DrillDownModal.tsx` ×œ××¨×›×™×•×Ÿ

### ×©×œ×‘ 2: ×¤×™×ª×•×— ScrollableDrillDown
- [ ] ×™×¦×™×¨×ª ×ž×‘× ×” ×¨×›×™×‘ ×‘×¡×™×¡×™
- [ ] ×”×•×¡×¤×ª Props + State
- [ ] ×œ×•×’×™×§×ª ×—×™×©×•×‘ ×¨×ž×” 2 (×§×™×‘×•×¥ ×œ×¤×™ ×ž×¤×ª×— ×—×©×‘×•×Ÿ)
- [ ] ×œ×•×’×™×§×ª ×—×™×©×•×‘ ×¨×ž×” 3 (×§×™×‘×•×¥ ×œ×¤×™ ×—-×Ÿ × ×’×“×™)
- [ ] ×¢×™×¦×•×‘ UI + ×˜×‘×œ××•×ª

### ×©×œ×‘ 3: ××™× ×˜×’×¨×¦×™×”
- [ ] ×¢×“×›×•×Ÿ `index.tsx` - ×”×•×¡×¤×ª state
- [ ] ×¢×“×›×•×Ÿ `CategoryRow.tsx` - onClick ×—×“×©
- [ ] ×—×™×‘×•×¨ `onShowBiur` ×œ-BiurModal

### ×©×œ×‘ 4: ×‘×“×™×§×•×ª
- [ ] ×‘×“×™×§×ª ×¤×ª×™×—×”/×¡×’×™×¨×” ×¨×ž×” 2
- [ ] ×‘×“×™×§×ª ×ž×¢×‘×¨ ×œ×¨×ž×” 3
- [ ] ×‘×“×™×§×ª ×¤×ª×™×—×ª BiurModal (×¨×ž×” 4)
- [ ] ×‘×“×™×§×ª ×¡×™× ×•× ×™× (×—×•×“×©, ×§×•×“ ×ž×™×•×Ÿ)

### ×©×œ×‘ 5: ×¡×™×•×
- [ ] Git commit
- [ ] Git push
- [ ] ×¢×“×›×•×Ÿ ×ª×™×¢×•×“

---

## âš ï¸ ×›×œ×œ×™ ×¢×‘×•×“×” ×§×¨×™×˜×™×™×

### ××¡×•×¨ ×‘×”×—×œ×˜:
- âŒ ×œ×›×ª×•×‘ ×§×•×“ ×—×“×© ×ž××¤×¡ ×× ×™×© ×¨×›×™×‘ ×“×•×ž×”
- âŒ ×œ×”×—×œ×™×£ ×§×‘×¦×™× ×©×œ×ž×™×
- âŒ ×œ×©× ×•×ª ×ž×‘× ×” ×§×‘×¦×™× ×§×™×™×ž×™×
- âŒ ×œ×”×•×¡×™×£ ×¦×‘×¢×™× ×ž×—×•×¥ ×œ×¨×©×™×ž×” ×”×ž××•×©×¨×ª

### ×ž×•×ª×¨:
- âœ… ×œ×™×¦×•×¨ ×¨×›×™×‘ ×—×“×© (`ScrollableDrillDown.tsx`)
- âœ… ×œ×¢×“×›×Ÿ ×©×•×¨×•×ª ×¡×¤×¦×™×¤×™×•×ª ×‘×§×‘×¦×™× ×§×™×™×ž×™×
- âœ… ×œ×’×‘×•×ª ×§×‘×¦×™× ×™×©× ×™× ×œ××¨×›×™×•×Ÿ

---

## ðŸ“ ×”×¢×¨×•×ª ×˜×›× ×™×•×ª

### ×—×™×©×•×‘ ×¡×›×•×ž×™×:
```typescript
// ×¨×ž×” 2 - ×¡×›×•× ×œ×¤×™ ×ž×¤×ª×— ×—×©×‘×•×Ÿ
const accountTotals = transactions
  .filter(t => t['×§×•×“ ×ž×™×•×Ÿ'] === categoryCode && t.month === month)
  .reduce((acc, t) => {
    const key = t['×ž×¤×ª×— ×—×©×‘×•×Ÿ'];
    acc[key] = (acc[key] || 0) + t['×ª× ×•×¢×”'];
    return acc;
  }, {});

// ×¨×ž×” 3 - ×¡×›×•× ×œ×¤×™ ×—-×Ÿ × ×’×“×™
const vendorTotals = transactions
  .filter(t => t['×ž×¤×ª×— ×—×©×‘×•×Ÿ'] === selectedAccount)
  .reduce((acc, t) => {
    const key = t['×—-×Ÿ × ×’×“×™'];
    acc[key] = (acc[key] || 0) + t['×ª× ×•×¢×”'];
    return acc;
  }, {});
```

### ×˜×™×¤×•×œ ×‘×¡×•×’×¨×™×™× (×ž×¡×¤×¨×™× ×©×œ×™×œ×™×™×):
```typescript
const formatCurrency = (amount: number) => {
  if (amount < 0) {
    return `(${Math.abs(amount).toLocaleString('he-IL')} â‚ª)`;
  }
  return `${amount.toLocaleString('he-IL')} â‚ª`;
};
```

---

## ðŸŽ¯ ×™×¢×“×™×

### ×§×¦×¨ ×˜×•×•×—:
- [ ] ×”×©×œ×ž×ª ScrollableDrillDown.tsx
- [ ] ××™× ×˜×’×¨×¦×™×” ×¢× ×ž×¢×¨×›×ª ×§×™×™×ž×ª
- [ ] ×‘×“×™×§×•×ª ×¤×•× ×§×¦×™×•× ×œ×™×•×ª

### ××¨×•×š ×˜×•×•×—:
- [ ] ×× ×™×ž×¦×™×•×ª ×ž×¢×‘×¨ ×‘×™×Ÿ ×¨×ž×•×ª
- [ ] ×©×ž×™×¨×ª ×ž×¦×‘ × ×‘×—×¨ (breadcrumbs)
- [ ] ××¤×©×¨×•×ª ×œ×—×–×•×¨ ×¨×ž×” ××—×•×¨×” (back button)

---

**ðŸ“Œ ×”×¢×¨×” ×—×©×•×‘×”:** ×§×•×‘×¥ ×–×” ×ž×™×•×¢×“ ×œ×”×•×¨×“×” ×•×©×™×ž×•×© ×‘×¡×©× ×™× ×”×‘××™×!